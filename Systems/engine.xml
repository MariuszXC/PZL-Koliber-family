<?xml version="1.0" encoding="UTF-8"?>
<system name="Engine">
	<channel name="Primer">
		<switch name="propulsion/engine/priming-enabled">
			<default value="1"/>
			<test value="0">
				propulsion/engine/set-running == 1
			</test>
		</switch>
	
		<fcs_function name="propulsion/engine/primer">
			<function>
				<product>
					<quotient>
						<property>/controls/engines/engine/primer</property>
						<value>2</value>
					</quotient>
					<property>propulsion/engine/priming-enabled</property>
				</product>
			</function>
		</fcs_function>

		<switch name="/controls/engines/engine/primer">
			<default value="/controls/engines/engine/primer"/>
			<test value="0">
				propulsion/engine/priming-enabled == 0
			</test>
		</switch>
	</channel>
	
	<channel name="Mixture"> <!-- Inspired from Cessna 172P -->
		<fcs_function name="fcs/mixture-primer-cmd">
			<function>
				<product>
					<property>fcs/mixture-cmd-norm</property>
					<table>
						<independentVar lookup="row">/controls/engines/engine/primer</independentVar>
						<independentVar lookup="column">fcs/throttle-pos-norm</independentVar>
						<tableData>
								0.09	0.1	0.5	0.51
							2	0		0	0	0
							3	0		1	1	0
							6	0		1	1	0
							7	0		0	0	0
						</tableData>
					</table>
				</product>
			</function>
		</fcs_function>
		
		<switch name="fcs/mixture-pos-norm">
			<default value="fcs/mixture-cmd-norm"/>
			<test logic="AND" value="fcs/mixture-primer-cmd">
				propulsion/engine/priming-enabled eq 1
			</test>
		</switch>
	</channel>
</system>
